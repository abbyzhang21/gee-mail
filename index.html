<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
		<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

  		//1. setInterval to invoke getNewMessage(), store the new message in newMessage[]
  		function loadNewMessage(){
  			var newMessage = getNewMessage();
  			window.geemails.push(newMessage);
  	
  		}
  		loadNewMessage();
  		var pop = setInterval(getNewMessage, 1000);
  		console.log(geemails.length);
  		
  		//create row with rds 
  		function createTable(){
  			var table = document.getElementById("inboxElem");
  			var row = table.insertRow(0);
  			var cell1 = row.insertCell(0);
  			var cell2 = row.insertCell(1);
  			var cell3 = row.insertCell(2);
  			row.className = "tableRow";
  			cell1.innerHTML = getNewMessage().sender;
  			cell2.innerHTML = getNewMessage().subject;
  			cell3.innerHTML = getNewMessage().date;
  		}
  		
  		function createInbox(){
  			for(i = 0; i < geemails.length; i++){
  				createTable();
  			}
  		}
  		createInbox();

  		//display message content
  		var showMessage = document.getElementsByClassName("tableRow");
  		for(i = 0; i < showMessage.length; i++){
  			showMessage[i].addEventListener("click",printMessage);
  		}
  		function printMessage(){
  			var printElem = document.getElementById("inboxElem");
  			printElem.innerHTML = getNewMessage().body;
  		}
  		
  		
  		//display number of inbox 
  		var num = geemails.length;
  		var displayNum = document.getElementById("inbox");
  		displayNum.innerHTML += " ( " + num + " )";

  		
      };

      
      
    </script>
	</head>
	<body>
		<header id="head">Gee-mail</header>
		<div class="container" id="main">
			<button id="inbox" onClick="window.location.reload()"><i class="fas fa-envelope"></i>

Inbox</button>
			<table id="inboxElem">
			</table>
		</div>
	</body>
</html>